{% extends 'base.html' %}
{% load static %}

{% block title %}Research Group - Publications{% endblock %}

{% block content %}
<h1 class="mb-4">Publications</h1>

<div class="mb-4">
    <p>
        Our research group has published numerous papers in leading journals and conferences.
        Below is a list of our recent publications.
    </p>
</div>

<!-- Filter by year -->
<div class="mb-4">
    <label for="publication-year-filter" class="form-label">Filter by Year:</label>
    <select id="publication-year-filter" class="form-select w-auto">
        <option value="all" selected>All Years</option>
        {% for year in publication_years %}
        <option value="{{ year|date:'Y' }}">{{ year|date:'Y' }}</option>
        {% endfor %}
    </select>
</div>

<!-- Publications List -->
<div class="publications-list">
    {% for pub in publications %}
    <div class="publication" data-year="{{ pub.date|date:'Y' }}">
        <h4>{{ pub.title }}</h4>
        <p class="authors">{{ pub.authors }}</p>
        <p class="date">{{ pub.date|date:"F Y" }}</p>
        {% if pub.abstract %}
        <div class="abstract-toggle mb-2">
            <a class="btn btn-sm btn-outline-secondary" data-bs-toggle="collapse" href="#abstract-{{ forloop.counter }}" role="button">
                Show Abstract
            </a>
            <div class="collapse mt-2" id="abstract-{{ forloop.counter }}">
                <div class="card card-body">
                    {{ pub.abstract }}
                </div>
            </div>
        </div>
        {% endif %}
        <div class="publication-links">
            {% if pub.paperlink %}
            <a href="{{ pub.paperlink }}" class="btn btn-sm btn-outline-primary me-2" target="_blank">View Publication</a>
            {% endif %}
            {% if pub.pdflink %}
            <a href="{{ pub.pdflink }}" class="btn btn-sm btn-outline-primary" target="_blank">Download PDF</a>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <p>No publications available at the moment.</p>
    {% endfor %}
</div>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle abstract show/hide text
        const abstractToggles = document.querySelectorAll('.abstract-toggle a');
        abstractToggles.forEach(toggle => {
            toggle.addEventListener('click', function() {
                if (this.textContent.trim() === 'Show Abstract') {
                    this.textContent = 'Hide Abstract';
                } else {
                    this.textContent = 'Show Abstract';
                }
            });
        });
    });
</script>
{% endblock %} 