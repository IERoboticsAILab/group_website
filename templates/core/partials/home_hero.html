{% load static %}

<div class="banner-container position-relative">
    <div class="banner-carousel">
        <div class="carousel-track">
            {% if banner_images %}
                {% for image in banner_images %}
                    <div class="carousel-slide">
                        <img src="{{ image.image.url }}" alt="{{ image.title }}" class="banner-image" title="{{ image.description }}">
                    </div>
                {% endfor %}
                <!-- Duplicate slides for seamless infinite scrolling -->
                {% for image in banner_images %}
                    <div class="carousel-slide">
                        <img src="{{ image.image.url }}" alt="{{ image.title }}" class="banner-image" title="{{ image.description }}">
                    </div>
                {% endfor %}
            {% else %}
                <!-- Fallback images if no banner images are configured -->
                <div class="carousel-slide">
                    <img src="{% static 'images/GAME.gif' %}" alt="Research image 1" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/iTrash.gif' %}" alt="Research image 2" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/ROBOPRENEUR.gif' %}" alt="Research image 3" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/SPICE.gif' %}" alt="Research image 4" class="banner-image">
                </div>
                <!-- Duplicate for fallback infinite scrolling -->
                <div class="carousel-slide">
                    <img src="{% static 'images/GAME.gif' %}" alt="Research image 1" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/iTrash.gif' %}" alt="Research image 2" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/ROBOPRENEUR.gif' %}" alt="Research image 3" class="banner-image">
                </div>
                <div class="carousel-slide">
                    <img src="{% static 'images/SPICE.gif' %}" alt="Research image 4" class="banner-image">
                </div>
            {% endif %}
        </div>
    </div>
    <div class="banner-overlay"></div>
    <div class="banner-text-container text-center text-white">
        {% if home_content %}
            <h1 class="display-4 fw-bold">{{ home_content.headline }}</h1>
            <p class="lead">{{ home_content.subheadline }}</p>
        {% else %}
            <h1 class="display-4 fw-bold">Cyber-Physical Life</h1>
            <p class="lead">CyPhy /ˈsaɪˌfaɪ/ Life</p>
        {% endif %}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Calculate the correct width for carousel slides
        const carouselTrack = document.querySelector('.carousel-track');
        if (carouselTrack) {
            const slides = carouselTrack.querySelectorAll('.carousel-slide');
            const totalSlides = slides.length;
            const uniqueSlides = totalSlides / 2; // Half are duplicates
            
            // Calculate width so 4 images show at once
            const slideWidth = (100 / totalSlides) + '%';
            
            // Apply width to all slides
            slides.forEach(slide => {
                slide.style.width = slideWidth;
            });
            
            // Adjust animation timing based on number of images
            const duration = Math.max(30, uniqueSlides * 5); // 5 seconds per image, minimum 30s
            carouselTrack.style.animationDuration = duration + 's';
        }
    });
</script> 